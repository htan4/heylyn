function GetLeapMonth(r){var n=LunarLeapYear[r-2001>>1];return 0==(r-2001&1)?n>>4:15&n}function LunarMonthDays(r,n){var a,t,e;return a=0,t=29,e=16-n,n>GetLeapMonth(r)&&GetLeapMonth(r)>0&&e--,(LunarDaysOfMonth[r-2001]&1<<e)>0&&t++,n==GetLeapMonth(r)&&(a=(LunarDaysOfMonth[r-2001]&1<<e-1)>0?30:29),t+(a<<16)}function LunarYearDays(r){var n,a;n=0;for(var t=1;t<=12;t++)a=LunarMonthDays(r,t),n+=a>>16&65535,n+=65535&a;return n}function FormatLunarYear(r){var n,a=new String("甲乙丙丁戊己庚辛壬癸"),t=new String("子丑寅卯辰巳午未申酉戌亥");return n=a.substr((r-4)%10,1),n+=t.substr((r-4)%12,1),n+"年"}function FormatLunarMonth(r){var n,a=new String("正二三四五六七八九十");return n=r<=10?a.substr(r-1,1):11==r?"十一":"十二",n+"月"}function FormatLunarDay(r){var n,a=new String("初十廿三"),t=new String("一二三四五六七八九十");return n=20!=r&&30!=r?a.substr((r-1)/10,1)+t.substr((r-1)%10,1):20!=r?a.substr(r/10,1)+"十":"二十"}function GetLunarDateString(r){var n,a,t,e,u=!1,o=6e4,L=60*o,s=24*L,i=Math.round(r.getTime()/s)-11323;if(i<23)iYear=2e3,t=12,e=i+7;else{for(i-=23,a=2001,t=1,e=1,n=LunarYearDays(a);i>=n;)i-=n,a++,n=LunarYearDays(a);for(n=65535&LunarMonthDays(a,t);i>=n;){if(i-=n,t==GetLeapMonth(a)){if(n=LunarMonthDays(a,t)>>16,i<n){u=n>0;break}i-=n}t++,n=65535&LunarMonthDays(a,t)}e+=i}return FormatLunarDay(e)}var LunarDaysOfMonth=new Array(54440,54432,55888,23208,22176,43736,9680,37584,51544,43344,46240,46416,46416,21928,19360,42416,21176,21168,43312,29864,27296,44368,19880,19296,38256,42208,53856,59696,54576,23200,27472,38608,19176,19152,42192,53848,53840,54560,55968,46496,22224,19160,18864,42168,42160,43600,46376,27936,44448,21936),LunarLeapYear=new Array(64,2,7,0,80,4,9,0,96,4,0,32,96,5,0,48,176,6,0,80,2,7,0,80,3);